<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Science & Tech Video Stream</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            height: 100vh;
            margin: 0;
            background-color: #f4f4f4;
        }
        h1 {
            margin-bottom: 20px;
        }
        #videoPlayer {
            width: 80%;
            max-width: 800px;
            height: 450px;
            border: 2px solid #ccc;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>Sa Science & Tech Daily Stream</h1>
    <iframe id="videoPlayer" src="" frameborder="0" allowfullscreen></iframe>
    <script>
        let currentIndex = 0;
        let videoLinks = [];

        function loadPlaylist() {
            fetch('playlist2.csv')
                .then(response => response.text())
                .then(data => {
                    videoLinks = data.split('\n').filter(Boolean);

                    if (videoLinks.length > 0) {
                        playVideo(currentIndex);
                    } else {
                        console.error('Playlist is empty or cannot be parsed.');
                    }
                })
                .catch(error => console.error('Error loading playlist:', error));
        }

        function playVideo(index) {
            const videoPlayer = document.getElementById('videoPlayer');
            videoPlayer.src = videoLinks[index] + '?autoplay=1&mute=1';

            // Listen for when the video ends to load the next one
            videoPlayer.addEventListener('load', function() {
                const iframeDoc = videoPlayer.contentDocument || videoPlayer.contentWindow.document;
                const videoElem = iframeDoc.getElementsByTagName('video')[0];

                if (videoElem) {
                    videoElem.onended = function() {
                        currentIndex = (currentIndex + 1) % videoLinks.length;
                        playVideo(currentIndex);
                    };
                }
            });
        }

        // Load the playlist on page load
        window.onload = loadPlaylist;
    </script>
</body>
</html>
